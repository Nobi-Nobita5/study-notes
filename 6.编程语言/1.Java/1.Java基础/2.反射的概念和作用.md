#### 一、 反射的定义

JAVA反射机制是在**运行状态中**，对于任意一个类，都能够知道这个类的所有属性和方法；对于任意一个对象，都能够调用它的任意一个方法；这种**动态获取**以及**动态调用对象**的方法的功能称为java语言的反射机制。

通俗的解释：反射可以**不使用new关键字**就能获取类的对象

反射的应用场合：在**编译时根本无法**知道该对象或类可能属于哪些类，程序**只依靠运行时信息**来发现该对象和类的真实信息。
                               反射在运行阶段使用；工厂模式，动态生成对象；框架底层；运行过程中修改jar包中的一些内容（由于反射会额外消耗一定的系统资源，因此如果不需要动态地创建一个对象，那么就不需要用反射。另外，反射调用方法时可以忽略权限检查，因此可能会破坏封装性而导致安全问题。）

#### 二、反射的功能

在运行时构造任意一个类的对象；
在运行时判定任意一个类所具有的成员变量和方法；
在运行时判定任意一个对象所属的类；
在运行时调用任意一个对象的方法；
生成动态代理。

#### 三、反射的主要用途

反射最重要的用途就是开发各种通用框架。

例子：
1）比如在spring中，我们将所有的类Bean交给spring容器管理，无论是XML配置Bean还是注解配置，当我们从容器中获取Bean来依赖注入时，容器会读取配置，而配置中给的就是类的信息，spring根据这些信息，需要创建那些Bean，spring就动态的创建这些类。还有在struts2的struts.xml中配置action，也是通过反射调用的action。

2）还有在我们创建数据库链接时，这句代码Class tc = Class.forName(“com.java.dbtest.TestConnection”)就是告诉JVM去加载这个类，而加载的过程是在程序执行过程中动态加载的。通过类的全类名让jvm在服务器中找到并加载这个类，而如果是使用别的数据库，那就要换一个类了，如果是传统写死的方法创建，就要修改原来类的代码，而对于反射，则只是传入的参数就变成另一个了而已，可以通过修改配置文件，而不是直接修改代码。

3）再比如我们有两个程序员，一个程序员在写程序的时候，需要使用第二个程序员所写的类，但第二个程序员并没完成他所写的类。那么第一个程序员的代码能否通过编译呢？这是不能通过编译的。利用Java反射的机制，就可以让第一个程序员在没有得到第二个程序员所写的类的时候，来完成自身代码的编译。只是如果这个类还没有，获取时会获取不到，但不会导致编译错误，更不会导致程序的崩溃。

4）还有当我们在使用 IDE（如 Eclipse\IDEA）时，当我们输入一个队长或者类并向调用它的属性和方法时，一按 (“.”)点号，编译器就会自动列出她的属性或方法，这里就会用到反射。

#### 四、基本反射功能的实现

~~~shell
1)、获取Class对象
在 Java API 中，提供了获取 Class 类对象的三种方法：

第一种，使用 Class.forName 静态方法。
前提：已明确类的全路径名。
Class.forName()方法的作用就是把类加载到JVM中，它会返回一个与带有给定字符串名的类或接口相关联的Class对象，并且JVM会加载这个类，同时JVM会执行该类的静态代码段。

第二种，使用 .class 方法。
说明：仅适合在编译前就已经明确要操作的 Class

第三种，使用类对象的 getClass() 方法。
说明：适合有对象示例的情况下
-----------------------------------
2)、获取对象实例
共两种方法：

2.1、直接用字节码文件获取对应实例
// 调用无参构造器 ，若是没有，则会报异常
Object o = clazz.newInstance();　　

2.2、有带参数的构造函数的类，先获取到其构造对象，再通过该构造方法类获取实例：
/ /获取构造函数类的对象
Constroctor constroctor = clazz.getConstructor(String.class,Integer.class); /
// 使用构造器对象的newInstance方法初始化对象
Object obj = constroctor.newInstance("龙哥", 29); 
~~~

#### 五、反射的缺点：
1）使用反射基本上是一种解释操作，用于字段和方法接入时要远慢于直接代码。因此Java反射机制主要应用在对灵活性和扩展性要求很高的系统框架上,普通程序不建议使用。

2）使用反射会模糊程序内部逻辑

3）程序人员希望在源代码中看到程序的逻辑，反射等绕过了源代码的技术，因而会带来维护问题。反射代码比相应的直接代码更复杂。



参考：定义：https://blog.csdn.net/Jackyyl729/article/details/109502965

​			使用：https://blog.csdn.net/jiahao1186/article/details/81699582

