#### 1、为什么要数仓、为什么要分层

数据结构不清晰---分层架构设计

数据重复建设 --- 高内聚低耦合、核心模型与扩展业务模型分离、公共处理逻辑下沉及单一

数据血缘追踪、问题定位麻烦、SQL很长效率低---成本与性能平衡

数据不安全---数据可回滚与一致性

数据不规范--命名规范

#### 2、数仓建设基本原则

~~~
分层架构设计
高内聚低耦合（主题内高内聚、不同主题低耦合）
核心模型与扩展业务模型分离
公共处理逻辑下沉及单一
成本与性能平衡
数据可回滚与一致性
命名规范
~~~

#### 3、数据库和数据仓库的区别

数据库	数据仓库

事务处理	分析处理OLAP

范式		反范式多维度

数据源单一		多个异构数据源

频繁增删改查		复杂查询，聚合分析

#### 4、范式建模、纬度建模

3范式：字段原子性、避免部分依赖、避免传递依赖

纬度建模适合olap，事实表、纬度表，制造冗余、反3范式

#### 5、纬度建模类型有哪些

星型、雪花、星座（落地）

#### 6、标准的数仓架构、规范的海外DWD建模过程

~~~
---底座没有需求导向，更多是业务流程架构搭建
1、定义内容业务线（微粒贷、车贷），并分数据域建设（风险、账务、交易、运营）
2、定义基本业务过程（贷前）、维度（客户、地域维度）、修饰类型（终端类型）
3、维度建模为基础，建设事实表、维度表（实体表、关系表、配置表）
1）概要设计：（根据业务需求）维表创建初始属性列表、事实表创建提议度量
2）详细设计：经过模型图评审、再设计，确定维度表属性、事实表度量
3）详细设计文档输出
4）生产数据探查，测试，提测

---抽象的概念方法
事实表建设：
1、确定粒度（必须的）、度量（原子指标、派生指标）、变化维（没必要建维度表的属性）
注：派生指标：事务型（新增客户数）、存量型（总客户数）、复合型（客户审批通过率）
2、事实表分类，DWS需按照轻度汇总或者重度汇总建设，确定增量or全量方式
1）事务事实表（原子事实基表）：记录业务过程
2）累积快照事实表：关键业务过程信息，覆盖业务过程的整个生命周期
3）周期快照事实表：不常用，有规律的时间间隔记录业务事实
维度表建设：
1、确定维度类别（客户、地域、还款计划）
2、确定主键
3、确定属性
4、注意处理缓慢变化维的方法（常用插入新的维度列，用于保存历史数据）
以客户维度为例，假设客户的地址发生了变化：
Type 1：直接将客户地址更新为新地址，旧地址信息丢失。
Type 2：新增一条记录，记录新地址，并设置有效期字段。旧记录的有效期结束，新记录的有效期开始。
Type 3：在原有记录中新增一个字段“旧地址”，将原地址存储在该字段中，当前地址字段更新为新地址。
~~~

7、延伸到hive优化（见hive要点），聊hive on spark，引出spark回溯优化。通过saprk rdd没有状态，引出flink

8、延伸到实时数仓架构，在尝试引入StarRocks（见实时数仓架构优化）





参考ppt：武研大数据系列课程第一期